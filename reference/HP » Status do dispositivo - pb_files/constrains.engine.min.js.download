window.ConstrainsEngine={filters:{parseValue:function(a,b,c,d){return jQuery.isFunction(a)&&(a=a.call(b,c,d)),a}},attributes:{addClass:function(a,b,c){a=ConstrainsEngine.filters.parseValue(a,this,b,c),$(this).addClass(a)},removeClass:function(a,b,c){a=ConstrainsEngine.filters.parseValue(a,this,b,c),$(this).removeClass(a)},trigger:function(a,b,c){if(ConstrainsEngine.source.hasOwnProperty(a)){var d=ConstrainsEngine.source[a];d.cacheCollection.each(function(a){ConstrainsEngine.setAttribute(this,d,a,d.cacheCollection,!1)})}},html:function(a,b,c){a=ConstrainsEngine.filters.parseValue(a,this,b,c),jQuery(this).html(a)},value:function(a,b,c){ConstrainsEngine.initializing||(a=ConstrainsEngine.filters.parseValue(a,this,b,c),jQuery(this).val(a))},display:function(a,b,c){var d=jQuery(this);d.parent().is("div.control, span.button")?d=d.parent():d.parent().parent().is("div.control")&&(d=d.parent().parent()),a=ConstrainsEngine.filters.parseValue(a,this,b,c),a?d.show():d.hide()},disabled:function(a,b,c){a=ConstrainsEngine.filters.parseValue(a,this,b,c),jQuery(this).prop("readonly",a?!0:!1),jQuery(this).is(":checkbox, :radio")?a||jQuery(this).prop("disabled",!1):jQuery(this).prop("disabled",a?!0:!1)},enabled:function(a,b,c){a=ConstrainsEngine.filters.parseValue(a,this,b,c),ConstrainsEngine.attributes.disabled.call(this,!a,b,c)},required:function(a,b,c){a=ConstrainsEngine.filters.parseValue(a,this,b,c),a?jQuery(this).hasClass("control")?jQuery(this).addClass("required"):jQuery(this).parents(".control:first, .button:first").addClass("required"):jQuery(this).hasClass("control")?jQuery(this).removeClass("required"):jQuery(this).parents(".control:first, .button:first").removeClass("required")},rel:function(a,b,c,d){var e,f=jQuery(this,ConstrainsEngine.scope);if(a.hasOwnProperty("evaluateElement")&&(f=jQuery(a.evaluateElement,ConstrainsEngine.scope)),a.hasOwnProperty("evaluateAttribute")?e=f.attr(a.evaluateAttribute):(f.is(":checkbox, :radio")?c.length>1?(f=f.filter(":checked"),e=f.attr(ConstrainsEngine.evaluateAttribute)):e=f.prop("checked"):e=f.prop(ConstrainsEngine.evaluateAttribute),f.is(":submit, :button")&&d&&(e="true")),a.hasOwnProperty(ConstrainsEngine.evaluate)&&(e="test"in a.evaluate?a.evaluate.test(e):a.evaluate.call(f,e,b,c,d)),jQuery.isArray(e)||(e=[e]),ConstrainsEngine.debug){var g="none";d&&(g=d.type)}jQuery.each(e,function(b,c){if(a.hasOwnProperty(c))return void ConstrainsEngine.execute(a[c],f);var d=new RegExp("(^|,)\\s*"+c+"\\s*(,|$)","i"),e=!1;for(property in a)d.test(property)&&(ConstrainsEngine.execute(a[property],f),e=!0);0==e&&a.hasOwnProperty(ConstrainsEngine.evaluateDefaultScheme)&&ConstrainsEngine.execute(a[ConstrainsEngine.evaluateDefaultScheme],f)})}},execute:function(a,b){jQuery.each(a,function(a,b){var c=jQuery(a,ConstrainsEngine.scope);jQuery(c).each(function(a,d){ConstrainsEngine.setAttribute(d,b,a,c)})})},setAttribute:function(a,b,c,d,e){jQuery.each(b,function(b,f){if(ConstrainsEngine.attributes.hasOwnProperty(b)){if(ConstrainsEngine.attributes[b].call(a,f,c,d),ConstrainsEngine.initializing&&e&&"rel"==b&&"rel"==b){var g,h=(a.attr("type")||a[0].localName).toString().toLowerCase();g=ConstrainsEngine.events.hasOwnProperty(h)?ConstrainsEngine.events[h]:ConstrainsEngine.defaultEvent,jQuery(a,ConstrainsEngine.scope).bind(g,function(a){ConstrainsEngine.attributes.rel.call(this,f,c,d,a)})}}else jQuery(a,ConstrainsEngine.scope).prop(b,f);$(a).trigger("hpUpdate")})},initializing:!1,scope:!1,source:{},length:0,debug:!1,evaluate:"evaluate",evaluateElement:!1,evaluateAttribute:"value",evaluateDefaultScheme:"evaluateDefaultScheme",events:{select:"click change keyup",text:"blur change keyup",textarea:"blur change keyup",file:"blur change keyup",button:"click",submit:"click",radio:"click blur change keyup",checkbox:"click blur change keyup",form:"submit click change keyup blur"},defaultEvent:"click",run:function(a,b){this.initializing=!0,this.scope=b||this.scope;var c=this;jQuery.each(a,function(b,d){"string"==typeof d&&a.hasOwnProperty(d)&&(d=a[d]),d.cacheCollection=jQuery(b,ConstrainsEngine.scope),c.source[b]=d,c.length++,d.cacheCollection.each(function(a){var b=jQuery(this,ConstrainsEngine.scope);ConstrainsEngine.setAttribute(b,d,a,d.cacheCollection,!0)})}),$(window).trigger("jsAnchor"),this.initializing=!1}};